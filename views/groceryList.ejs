<%- include('partials/header') %>

<div class="row">
  <div class="col-md-12">
    <div class="card mb-4">
      <div class="card-header bg-primary text-white">
        <h2 class="mb-0">Enter Your Grocery List</h2>
      </div>
      <div class="card-body">
        <form id="groceryListForm" action="/groceries/process" method="POST">
          <div class="mb-3">
            <label for="groceryList" class="form-label">Enter items one per line or as a comma-separated list:</label>
            <textarea
              class="form-control"
              id="groceryList"
              name="groceryList"
              rows="10"
              placeholder="Example:
2 gallons of organic milk
1 loaf of whole wheat bread
6 organic apples
Cheerios cereal
Organic spinach"
              required
            ></textarea>
          </div>
          
          <!-- Progress Bar (hidden initially) -->
          <div id="progressContainer" class="mb-3 d-none">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Processing Your Grocery List</h5>
                <div class="progress mb-2" style="height: 25px;">
                  <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated"
                       role="progressbar"
                       style="width: 0%;"
                       aria-valuenow="0"
                       aria-valuemin="0"
                       aria-valuemax="100">0%</div>
                </div>
                <p id="progressMessage" class="mb-0 text-muted">Initializing...</p>
                <small id="progressDetails" class="text-muted"></small>
              </div>
            </div>
          </div>
          
          <div class="d-grid gap-2">
            <button type="submit" id="submitBtn" class="btn btn-primary btn-lg">Process Grocery List</button>
          </div>
        </form>
      </div>
    </div>
    
    <!-- Results Container (populated via JavaScript) -->
    <div id="resultsContainer" class="d-none">
      <div class="card">
        <div class="card-header bg-success text-white">
          <h3 class="mb-0">Results</h3>
        </div>
        <div class="card-body">
          <div id="resultsList" class="list-group">
            <!-- Results will be inserted here via JavaScript -->
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<%- include('partials/footer') %>